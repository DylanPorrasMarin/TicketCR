@model List<MembresiaModel>

@using Microsoft.AspNetCore.Http;
@inject IHttpContextAccessor Accesor;

@{

    ViewBag.Title = "AdquirirMembresias";
    Layout = "../Shared/_Dashboard.cshtml";

    var IdUsuario = Accesor.HttpContext.Session.GetInt32("idUser");
    // Obtener el ID de membresía único del usuario (si existe)
    int idMembresiaUsuario = Model.FirstOrDefault(m => m.IdMembresiaUsuario != 0)?.IdMembresiaUsuario ?? 0;
    // Buscar el nombre de la membresía correspondiente al ID de membresía de usuario
    string nombreMembresiaUsuario = Model.FirstOrDefault(m => m.IdMembresia == idMembresiaUsuario)?.NombreMembresia;
}


<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="~/ticketCR/css/adquirirMembresia/adquirirMembresia.css" />
    <link rel="stylesheet" href="~/ticketCR/css/adquirirMembresia/formularioAdquirirMembresia.css" />
    <script src="https://www.paypal.com/sdk/js?client-id=AcTdK3QXXI70frsQxlCdWVEiL5IHp8-70XLRcomId3JFBHJdh01oKJ6JxEe_oKj-zK6FgPq_tesHB1eS&currency=USD"></script>
</head>
<body>


    <div class="container">
        <div class="container p-5">

            <div class="text-center"><h1>Membresías creadas</h1></div>
            <div class="row">
                @foreach (var membresia in Model)
                {
                    <div class="col-lg-4 col-md-12 mb-4">

                        <div class="card card1 h-100">
                            <div class="card-body body-color" style="background-color:orange; border-radius:20px;">
                                <div style="background-color:rgba(0,0,0,0.35); border-radius:20px; padding:30px;">
                                    <h5 class="card-title">@membresia.NombreMembresia</h5>
                                    <br /><br />
                                    <p><span class="h2">$@membresia.Costo</span>\mes</p>
                                    <br /><br />
                                    <ul>
                                        <li>Límite de eventos: 1-@membresia.CantidadEventos</li>
                                        <li>Cantidad de boletos: @membresia.CantidadBoletos por evento</li>
                                    </ul>
                                    @if (membresia.Estado)
                                    {
                                        <button class="btn btn-danger" onclick="desactivarMembresia(@membresia.IdMembresia)">Desactivar</button>
                                    }
                                    else
                                    {
                                        <button class="btn btn-success" onclick="activarMembresia(@membresia.IdMembresia)">Activar</button>
                                    }

                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <input type="hidden" id="id-usuario" name="id-usuario" value="@IdUsuario">

            <div id="paypal-button-container"></div>

            



            <!--FORMUALRIO PARA ADQUIRIR MEMBRESIA-->

        </div>
    </div>


    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>
    <script src="~/ticketCR/js/site.js"></script>
    <script src="~/ticketCR/js/membresiasCreadas/membresiasCreadas.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="~/ticketCR/js/alertas.js"></script>


</body>
</html>